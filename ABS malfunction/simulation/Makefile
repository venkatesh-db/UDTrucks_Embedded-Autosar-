# Makefile for ABS Malfunction Detection Simulation

CC = gcc
CFLAGS = -Wall -Wextra -std=c99 -O2 -g
TARGET = abs_simulation
SRCDIR = .
SOURCES = $(wildcard $(SRCDIR)/*.c)
OBJECTS = $(SOURCES:.c=.o)

# Default target
all: $(TARGET)

# Build the executable
$(TARGET): $(OBJECTS)
	@echo "ðŸ”¨ Linking $(TARGET)..."
	$(CC) $(OBJECTS) -o $(TARGET) -lm
	@echo "âœ… Build complete!"

# Compile source files
%.o: %.c
	@echo "ðŸ”§ Compiling $<..."
	$(CC) $(CFLAGS) -c $< -o $@

# Clean build artifacts
clean:
	@echo "ðŸ§¹ Cleaning build artifacts..."
	rm -f $(OBJECTS) $(TARGET)
	@echo "âœ… Clean complete!"

# Run the simulation
run: $(TARGET)
	@echo "ðŸš— Starting ABS Malfunction Detection Simulation..."
	@echo ""
	./$(TARGET)

# Install dependencies (if needed)
install-deps:
	@echo "ðŸ“¦ No additional dependencies required for this simulation"
	@echo "âœ… Standard C library and math library (-lm) are sufficient"

# Help
help:
	@echo "ðŸš— ABS Malfunction Detection Simulation"
	@echo "======================================"
	@echo ""
	@echo "Available targets:"
	@echo "  all        - Build the simulation executable"
	@echo "  run        - Build and run the simulation"
	@echo "  clean      - Remove build artifacts"
	@echo "  help       - Show this help message"
	@echo ""
	@echo "Usage examples:"
	@echo "  make run   # Build and run simulation"
	@echo "  make clean # Clean build files"

.PHONY: all clean run install-deps help